jQuery,$.fn.lyearloading=function(e){var i=$(this),t=$.extend({},{opacity:.1,backgroundColor:"#000000",imgUrl:"",textColorClass:"",spinnerColorClass:"",spinnerSize:"normal",spinnerText:"",zindex:999},e),o={position:"absolute",width:"100%",height:"100%",top:0,left:0,"background-color":t.backgroundColor,opacity:t.opacity,"z-index":t.zindex},n={position:"absolute","line-height":"120%","text-align":"center","vertical-align":"middle","z-index":t.zindex+1},r={position:"absolute","z-index":t.zindex+1},s="lyear-loading";return this.init=function(){if(i.children(".lyear-loading").length>0)i.children(".lyear-loading").fadeIn(250);else{var e=$("<div />").addClass(s),d=$("<span />").html($.trim(t.spinnerText)).addClass(s).addClass(t.textColorClass),a=t.imgUrl?$("<img />").attr("src",t.imgUrl).addClass(s):$("<div />").addClass("spinner-border").addClass(s).addClass(t.spinnerColorClass).css(this.getSpinnerSize()),l={resizeStyle:function(){var s=i.find(".lyear-loading").parent(),l="fixed,relative".indexOf(s.css("position"))>-1||s[0]===$(".lyear-loading")[0].offsetParent?{top:0,left:0}:{top:s[0].offsetTop,left:s[0].offsetLeft},h=i.outerWidth(),p=i.outerHeight();"body"==i[0].localName?(o.position="fixed",r.position="fixed",n.position="fixed",r.top=$(window).height()/2-a.outerHeight()/2+(t.spinnerText?-4-d.height()/2:0),r.left=$(window).width()/2-a.outerWidth()/2,n.top=$(window).height()/2+a.outerHeight()/2-4,n.left=$(window).width()/2-d.outerWidth()/2):(o.width=h,o.height=p,o.top=l.top,o.left=l.left,r.top=p/2-a.outerHeight()/2+(t.spinnerText?-4-d.height()/2:0)+l.top,r.left=h/2-a.outerWidth()/2+l.left,n.top=p/2+a.outerHeight()/2-4+l.top,n.left=h/2-d.width()/2+l.left),e.css(o),a.css(r),d.css(n)}};o["border-top-left-radius"]=i.css("border-top-left-radius"),o["border-top-right-radius"]=i.css("border-top-right-radius"),o["border-bottom-left-radius"]=i.css("border-bottom-left-radius"),o["border-bottom-right-radius"]=i.css("border-bottom-right-radius"),t.opacity&&e.css(o).appendTo(i),$.trim(t.spinnerText)&&d.css(n).appendTo(i),a.css(r).appendTo(i),this.loadImage(t.imgUrl,function(e){l.resizeStyle()},function(e){throw new Error(e)}),$(window).off("resize.lyear-loading").on("resize.lyear-loading",function(){l.resizeStyle()})}},this.hide=function(){i.children(".lyear-loading").fadeOut(250)},this.show=function(){i.children(".lyear-loading").fadeIn(250)},this.destroy=function(){i.children(".lyear-loading").fadeOut(250,function(){$(window).off("resize.lyear-loading"),$(this).remove()})},this.loadImage=function(e,i,t){return e?((o=new Image).src=e,o.complete&&i?i():(o.onload=function(){o.onload=null,i&&i()},o.onerror=function(e){o.onerror=null,t&&t(e)},o)):i();var o},this.getSpinnerSize=function(){var i;switch(e.spinnerSize){case"sm":i={width:"12px",height:"12px"};break;case"nm":i={width:"24px",height:"24px"};break;case"md":i={width:"36px",height:"36px"};break;case"lg":i={width:"48px",height:"48px"};break;default:i={width:e.spinnerSize,height:e.spinnerSize}}return i},this.init(),this};